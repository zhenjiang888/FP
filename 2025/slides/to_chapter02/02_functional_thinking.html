<!DOCTYPE HTML>
<html lang="zh-cn" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>åˆè§å‡½æ•°å¼æ€ç»´ - Programming Haskell</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Programming Haskell</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ç¬¬-02-ç« åˆè§å‡½æ•°å¼æ€ç»´"><a class="header" href="#ç¬¬-02-ç« åˆè§å‡½æ•°å¼æ€ç»´">ç¬¬ 02 ç« ï¼šåˆè§å‡½æ•°å¼æ€ç»´</a></h1>
<h3 id="01-ä¸¤å¥å¾ˆæœ‰å“²ç†çš„è¯"><a class="header" href="#01-ä¸¤å¥å¾ˆæœ‰å“²ç†çš„è¯">01 ä¸¤å¥å¾ˆæœ‰å“²ç†çš„è¯</a></h3>
<ul>
<li>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚</p>
</li>
<li>
<p>To a man with a hammer, everything looks like a nail.</p>
</li>
</ul>
<blockquote>
<ul>
<li>æ€ç»´æ–¹å¼æ˜¯ä¸€ç§å·¥å…·ï¼›ä¸èƒ½è¢«æ€ç»´æ–¹å¼æŸç¼š</li>
</ul>
</blockquote>
<h3 id="02-å‡½æ•°å¼æ€ç»´-æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„æ€ç»´æ–¹å¼"><a class="header" href="#02-å‡½æ•°å¼æ€ç»´-æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„æ€ç»´æ–¹å¼">02 â€œå‡½æ•°å¼æ€ç»´â€ æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„æ€ç»´æ–¹å¼</a></h3>
<ul>
<li>
<p>ä½¿ç”¨ â€œæ•°å­¦ä¸­çš„å‡½æ•°â€ ä½œä¸º æ±‚è§£ä¿¡æ¯å¤„ç†é—®é¢˜çš„åŸºæœ¬æˆåˆ†ã€‚</p>
</li>
<li>
<p>â€œä½¿ç”¨æ–¹å¼â€ åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>ä»é›¶å¼€å§‹ï¼Œå®šä¹‰ä¸€äº›åŸºæœ¬å‡½æ•°</p>
</li>
<li>
<p>æŠŠå·²æœ‰çš„å‡½æ•°ç»„è£…èµ·æ¥ï¼Œå½¢æˆæ–°çš„å‡½æ•°</p>
</li>
</ul>
</li>
</ul>
<h3 id="03-ç®€è¦å›é¡¾æ•°å­¦ä¸­çš„å‡½æ•°"><a class="header" href="#03-ç®€è¦å›é¡¾æ•°å­¦ä¸­çš„å‡½æ•°">03 ç®€è¦å›é¡¾ï¼šæ•°å­¦ä¸­çš„å‡½æ•°</a></h3>
<blockquote>
<p><strong>å®šä¹‰ï¼š</strong> å‡½æ•° / Function</p>
<p>å¯¹ä»»ä½•ä¸¤ä¸ªé›†åˆ<code>X</code>å’Œ<code>Y</code>ï¼Œç§°ä¸¤è€…ä¹‹é—´çš„å…³ç³»<code>f âŠ† X âœ— Y</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä¸”ä»…å½“å¦‚ä¸‹æ¡ä»¶æˆç«‹ï¼š</p>
<ul>
<li><code>âˆ€ x âˆˆ X, âˆƒ (u, v) âˆˆ f, x = u</code></li>
<li><code>âˆ€ (x, y) âˆˆ f, âˆ€ (u, v) âˆˆ f, x = u =&gt; y == v</code></li>
</ul>
<blockquote>
<p>ä¹Ÿå³ï¼šå¯¹<code>X</code>ä¸­çš„ä»»ä½•å…ƒç´ <code>x</code>ï¼Œå­˜åœ¨ä¸”ä»…å­˜å”¯ä¸€ä¸€ä¸ªå…ƒç´ <code>y âˆˆ Y</code>ï¼Œæ»¡è¶³<code>(x, y) âˆˆ f</code></p>
</blockquote>
</blockquote>
<h4 id="å‡½æ•°ç›¸å…³çš„è¡¨ç¤ºç¬¦å·"><a class="header" href="#å‡½æ•°ç›¸å…³çš„è¡¨ç¤ºç¬¦å·">å‡½æ•°ç›¸å…³çš„è¡¨ç¤ºç¬¦å·ï¼š</a></h4>
<p>å¯¹ä»»ä½•ä¸¤ä¸ªé›†åˆ<code>X</code>å’Œ<code>Y</code>ï¼Œ</p>
<ul>
<li>
<p><code>X âœ— Y</code></p>
<ul>
<li>
<p>ä¸€ä¸ªé›†åˆï¼Œå…¶å®šä¹‰ä¸ºï¼š<code>{ (x, y) | x âˆˆ X, y âˆˆ Y }</code></p>
</li>
<li>
<p>ä¹Ÿç§°ä¸ºé›†åˆ <code>X</code> å’Œ <code>Y</code> çš„ <strong>ç¬›å¡å°”ç§¯</strong></p>
</li>
</ul>
</li>
<li>
<p><code>X -&gt; Y</code></p>
<ul>
<li>ä¸€ä¸ªé›†åˆï¼ŒåŒ…å«ä¸”ä»…åŒ…å«æ‰€æœ‰ä»<code>X</code>åˆ°<code>Y</code>çš„å‡½æ•°</li>
</ul>
</li>
<li>
<p><code>f : X -&gt; Y</code></p>
<ul>
<li>
<p>å£°æ˜<code>f</code>æ˜¯ä¸€ä¸ªä»<code>X</code>åˆ°<code>Y</code>çš„å‡½æ•°ã€‚ä¹Ÿç§°ï¼š<code>f</code>æ˜¯ä¸€ä¸ªç±»å‹ä¸º<code>X -&gt; Y</code>çš„å‡½æ•°</p>
</li>
<li>
<p>ç§°ï¼š<code>X</code>ä¸º<code>f</code>çš„<strong>å®šä¹‰åŸŸ</strong> (Domain)ï¼›<code>Y</code>ä¸º<code>f</code>çš„<strong>å€¼åŸŸ</strong> (Codomain)</p>
</li>
</ul>
</li>
<li>
<p><code>f(x)</code></p>
<ul>
<li>
<p>å‡½æ•°<code>f</code>çš„å®šä¹‰åŸŸä¸­å…ƒç´ <code>x</code>æ˜ å°„åˆ°çš„å€¼åŸŸä¸­çš„é‚£ä¸ªå…ƒç´ ï¼Œ</p>
</li>
<li>
<p>æ˜¾ç„¶å¯çŸ¥ï¼š</p>
<ul>
<li>
<p><code>f(x) : Y</code>ï¼Œä¹Ÿå³ï¼š<code>f(x)</code>çš„ç±»å‹ä¸º<code>Y</code></p>
</li>
<li>
<p><code>(x, f(x)) âˆˆ f</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="å¸¸ç”¨çš„é›†åˆåŠå…¶è¡¨ç¤ºç¬¦å·"><a class="header" href="#å¸¸ç”¨çš„é›†åˆåŠå…¶è¡¨ç¤ºç¬¦å·">å¸¸ç”¨çš„é›†åˆåŠå…¶è¡¨ç¤ºç¬¦å·ï¼š</a></h4>
<blockquote>
<p>åœ¨ Haskell ä¸­ï¼Œâ€œç±»å‹â€ å’Œ â€œé›†åˆâ€ æ˜¯åŒä¹‰è¯</p>
</blockquote>
<ul>
<li>
<p><code>â„•</code>ï¼šè‡ªç„¶æ•°é›†åˆ/ç±»å‹</p>
</li>
<li>
<p><code>â„¤</code>ï¼šæ•´æ•°é›†åˆ/ç±»å‹</p>
</li>
<li>
<p><code>â„š</code>ï¼šæœ‰ç†æ•°é›†åˆ/ç±»å‹</p>
</li>
<li>
<p><code>â„</code>ï¼šå®æ•°é›†åˆ/ç±»å‹</p>
</li>
<li>
<p><code>ğ”¹ = { true, flse }</code>ï¼šå¸ƒå°”é›†åˆ/ç±»å‹ã€‚å…¶ä¸­ï¼Œ</p>
<ul>
<li>
<p><code>true</code> è¡¨ç¤º â€œçœŸâ€ï¼›<code>flse</code> è¡¨ç¤º â€œå‡â€</p>
</li>
<li>
<p>ç¨åç»™å‡º <code>ğ”¹</code> çš„ä¸€ç§æ›´ä¸ºå½¢å¼åŒ–çš„å®šä¹‰</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>å®šä¹‰ï¼š</strong> å‡½æ•°çš„ç»„åˆ / Function Composition</p>
<p>å¯¹ä»»ä½•ä¸¤ä¸ªå‡½æ•° <code>f : X -&gt; Y</code>ã€<code>g : Y -&gt; Z</code>ï¼Œä¸¤è€…çš„ç»„åˆï¼Œè®°ä¸º <code>g * f</code>ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>è¯¥å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="language-haskell">[ X Y Z : Set, f : X -&gt; Y, g : Y -&gt; Z ]
def g * f : X -&gt; Z = [x : X] g(f(x))
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>
<p>ä¸Šè¿°å®šä¹‰ä¸æ˜¯é‡‡ç”¨ Haskell è¯­è¨€ä¹¦å†™çš„ç¨‹åº</p>
</li>
<li>
<p>æœ¬ç« ä¸­å‡ºç°çš„æ‰€æœ‰ç¨‹åº (é™¤äº†æœ€åä¸€ä¸ª)ï¼Œéƒ½ä¸æ˜¯ Haskell ç¨‹åº</p>
<ul>
<li>è¿™äº›ç¨‹åºæ‰€é‡‡ç”¨çš„è¯­æ³•ï¼Œæ¥æºäºæˆ‘ä»¬æ­£åœ¨è®¾è®¡ä¸­çš„ä¸€ç§ç”¨äºæ•°å­¦è¯æ˜çš„è¯­è¨€</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="04-ä¸ºä»€ä¹ˆåœ¨å‡½æ•°çš„åŸºç¡€ä¸Šå¯ä»¥å½¢æˆä¸€ç§æ€ç»´æ–¹å¼"><a class="header" href="#04-ä¸ºä»€ä¹ˆåœ¨å‡½æ•°çš„åŸºç¡€ä¸Šå¯ä»¥å½¢æˆä¸€ç§æ€ç»´æ–¹å¼">04 ä¸ºä»€ä¹ˆåœ¨å‡½æ•°çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥å½¢æˆä¸€ç§æ€ç»´æ–¹å¼</a></h3>
<ul>
<li>
<p>å‡½æ•°å¯ä»¥å»ºæ¨¡ <strong>â€œå˜æ¢â€</strong> å’Œ <strong>â€œå› æœå…³ç³»â€</strong></p>
<ul>
<li>
<p>ä¿¡æ¯å¤„ç†é—®é¢˜ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ä¿¡æ¯çš„å˜æ¢é—®é¢˜</p>
</li>
<li>
<p>åœ¨é¢å‘ç‰¹å®šé¢†åŸŸé—®é¢˜çš„è½¯ä»¶åº”ç”¨ä¸­ï¼Œå¤§é‡æ¶‰åŠå¯¹ç‰©ç†ä¸–ç•Œä¸­å› æœå…³ç³»çš„ä»¿çœŸ</p>
</li>
</ul>
</li>
</ul>
<h3 id="05-å‡ ä¸ªç®€å•çš„å‡½æ•°"><a class="header" href="#05-å‡ ä¸ªç®€å•çš„å‡½æ•°">05 å‡ ä¸ªç®€å•çš„å‡½æ•°</a></h3>
<ul>
<li>
<p><strong>é€»è¾‘é</strong>å‡½æ•°</p>
<pre><code class="language-haskell">def not : ğ”¹ -&gt; ğ”¹ = [b] match b {
    true =&gt; flse,
    flse =&gt; true,
}
</code></pre>
</li>
<li>
<p><strong>é€»è¾‘ä¸</strong>å‡½æ•°</p>
<pre><code class="language-haskell">def and : (ğ”¹ âœ— ğ”¹) -&gt; ğ”¹ = [p] match p {
    (true, true) =&gt; true,
    _            =&gt; flse,
}
</code></pre>
<p>å¦ä¸€ç§å®šä¹‰æ–¹å¼:</p>
<pre><code class="language-haskell">def and : ğ”¹ -&gt; ğ”¹ -&gt; ğ”¹ = [l] [r] match (l, r) {
    (true, true) =&gt; true,
    _            =&gt; flse,
}
</code></pre>
</li>
<li>
<p>ä¸ºäº†å®šä¹‰å…³äºè‡ªç„¶æ•°<code>â„•</code>çš„å‡½æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç»™å‡º<code>â„•</code>çš„å®šä¹‰</p>
<pre><code class="language-haskell">def â„• : Type = {
    ctor zero : Self
    ctor succ : Self -&gt; Self
}
</code></pre>
<p>è¿™æ˜¯ä¸€ç§é€’å½’å®šä¹‰ï¼Œå…¶å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><code>zero</code> æ˜¯ <code>â„•</code> ä¸­çš„ä¸€ä¸ªå…ƒç´ </p>
</li>
<li>
<p>å¦‚æœ <code>n</code> æ˜¯ <code>â„•</code> ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆï¼Œ<code>succ n</code> ä¹Ÿæ˜¯<code>â„•</code> ä¸­çš„ä¸€ä¸ªå…ƒç´ </p>
</li>
<li>
<p><code>ctor</code> æ˜¯ä¸€ä¸ªå…³é”®å­— (Key Word)ï¼Œå…¶è‹±æ–‡å•è¯ â€œconstructorâ€ çš„ç¼©å†™</p>
<ul>
<li>
<p><code>ctor</code> åé¢çš„é‚£ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå…¬ç† (æ— éœ€ç»™å‡ºå…ƒç´ çš„å®šä¹‰)</p>
<ul>
<li>æ‰€è°“å…¬ç†ï¼Œå°±æ˜¯ä¸€ä¸ªç¥ç§˜å­˜åœ¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·å®šä¹‰è‡ªç„¶æ•°å‘¢ï¼Ÿ</p>
<p>å› ä¸ºåœ¨è¿™ç§å®šä¹‰ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºå¦‚ä¸‹è®¾å®šï¼š</p>
<ul>
<li><code>0 === zero</code></li>
<li><code>1 === succ(zero)</code></li>
<li><code>2 === succ(succ(zero))</code></li>
<li><code>3 === succ(succ(succ(zero)))</code>
<br> <br></li>
</ul>
</blockquote>
<blockquote>
<p><strong>å°å’Œå°šï¼š</strong></p>
<ul>
<li>è¿™ä¸å°±æ˜¯ä¸Šå¤ä¼ è¯´ä¸­çš„ <strong>â€œç»“ç»³è®°æ•°â€</strong> å—ï¼</li>
</ul>
<p><strong>å”åƒ§ï¼š</strong></p>
<ul>
<li>æ€ç»´çœŸæ•æ·ï¼›çœŸæ˜¯ä¸€ä¸ªå€¼å¾—æ•™è‚²çš„å¥½å­©å­ï¼</li>
</ul>
<p><strong>å°å’Œå°šï¼š</strong></p>
<ul>
<li>ä½†æ˜¯ï¼Œè¿™ä¹ˆ low çš„è‡ªç„¶æ•°å®šä¹‰ï¼ŒçœŸçš„é€‚åˆåœ¨åŒ—äº¬å¤§å­¦çš„è¯¾å ‚ä¸Šè®²å—ï¼Ÿ</li>
</ul>
<p><strong>å”åƒ§ï¼š</strong></p>
<ul>
<li>
<p>æˆ‘çŒœæµ‹ï¼Œä¹Ÿè®¸ä½ çš„æ€ç»´è¢«ä½ çš„é«˜ä¸­æ•°å­¦è€å¸ˆå›šç¦åœ¨æ•°å­¦å®‡å®™çš„ä¸€ç‰‡è’æ¼ ä¸­äº†</p>
</li>
<li>
<p>é‡‡ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹<code>ğ”¹</code>ç»™å‡ºå½¢å¼åŒ–çš„å®šä¹‰</p>
<pre><code class="language-haskell">def ğ”¹ : Type = {
    ctor flse : Self,
    ctor true : Self,
}
</code></pre>
</li>
</ul>
</blockquote>
</li>
<li>
<p>è‡ªç„¶æ•°çš„<strong>åŠ æ³•è¿ç®—</strong></p>
<pre><code class="language-haskell">def plus : â„• -&gt; (â„• -&gt; â„•) = [a] [b] match (a, b) {
    (m, zero)    =&gt; m,
    (m, succ(n)) =&gt; succ(plus(m)(n))
}
</code></pre>
<p>åŠ æ³•è¿ç®—ç¤ºä¾‹ï¼š</p>
<pre><code class="language-haskell">    plus(3)(4)  -- å› ä¸ºå®åœ¨å—ä¸äº†â€œç»“ç»³è®°æ•°â€çš„è‡ªç„¶æ•°ï¼Œæ‰€ä»¥å±€éƒ¨å›å½’äººç±»ä¸–ä¿—æ–‡æ˜ğŸ˜…
=== plus(3)(succ(3))
=== succ(plus(3)(3))
=== succ(plus(3)(succ(2)))
=== succ(succ(plus(3)(2)))
=== succ(succ(plus(3)(succ 1)))
=== succ(succ(succ(plus(3)(1))))
=== succ(succ(succ(plus(3)(succ 0))))
=== succ(succ(succ(succ(plus(3)(0)))))
=== succ(succ(succ(succ(3))))
=== (succ * succ * succ * succ)(3)
</code></pre>
<blockquote>
<p>ä¸è¦è¢«ä¸Šé¢è¿™ç§çœ‹ä¼¼å¤æ‚çš„å®šä¹‰æ‰€å›°æ‰°ã€‚</p>
<p>å®ƒåªä¸è¿‡ç”¨é€’å½’çš„æ–¹å¼å®šä¹‰äº†ä¸€ä»¶å¾ˆç®€å•çš„äº‹æƒ…ï¼š</p>
<pre><code class="language-haskell">  plus(m)(n) === (succ * succ * succ * ... * succ)(m)
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    "the composition of n succ"
</code></pre>
</blockquote>
</li>
<li>
<p>è‡ªç„¶æ•°çš„<strong>ä¹˜æ³•è¿ç®—</strong></p>
<pre><code class="language-haskell">def mult : â„• -&gt; (â„• -&gt; â„•) = [a] [b] match (a, b) {
    (m, zero)    =&gt; zero,
    (m, succ(n)) =&gt; plus(m)(mult(m)(n))
}
</code></pre>
<p>ä¹˜æ³•è¿ç®—ç¤ºä¾‹ï¼š</p>
<pre><code class="language-haskell">    mult(3)(4)
=== mult(3)(succ 3)
=== plus(3)(mult(3)(3))
=== plus(3)(mult(3)(succ 2))
=== plus(3)(plus(3)(mult(3)(2)))
=== plus(3)(plus(3)(mult(3)(succ 1)))
=== plus(3)(plus(3)(plus(3)(mult(3)(1))))
=== plus(3)(plus(3)(plus(3)(mult(3)(succ 0))))
=== plus(3)(plus(3)(plus(3)(plus(3)(mult(3)(0)))))
=== plus(3)(plus(3)(plus(3)(plus(3)(0))))
=== (plus(3) * plus(3) * plus(3) * plus(3))(0)
</code></pre>
<blockquote>
<p>ä¸è¦è¢«ä¸Šé¢è¿™ç§çœ‹ä¼¼å¤æ‚çš„å®šä¹‰æ‰€å›°æ‰°ã€‚</p>
<p>å®ƒåªä¸è¿‡ç”¨é€’å½’çš„æ–¹å¼å®šä¹‰äº†ä¸€ä»¶å¾ˆç®€å•çš„äº‹æƒ…ï¼š</p>
<pre><code class="language-haskell">  mult(m)(n) === (plus(m) * plus(m) * ... * plus(m))(zero)
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                   "the composition of n plus(m)"
</code></pre>
</blockquote>
</li>
<li>
<p>è‡ªç„¶æ•°çš„<strong>æŒ‡æ•°è¿ç®—</strong></p>
<pre><code class="language-haskell">def expn : â„• -&gt; (â„• -&gt; â„•) = [a] [b] match (a, b) {
    (m, zero)    =&gt; succ(zero),
    (m, succ(n)) =&gt; mult(m)(expn(m)(n))
}
</code></pre>
<p>æŒ‡æ•°è¿ç®—ç¤ºä¾‹ï¼š</p>
<pre><code class="language-haskell">    expn(3)(4)
=== expn(3)(succ 3)
=== mult(3)(expn(3)(3))
=== mult(3)(expn(3)(succ 2))
=== mult(3)(mult(3)(expn(3)(2)))
=== mult(3)(mult(3)(expn(3)(succ 1)))
=== mult(3)(mult(3)(mult(3)(expn(3)(1))))
=== mult(3)(mult(3)(mult(3)(expn(3)(succ 0))))
=== mult(3)(mult(3)(mult(3)(mult(3)(expn(3)(0)))))
=== mult(3)(mult(3)(mult(3)(mult(3)(1))))
=== (mult(3) * mult(3) * mult(3) * mult(3))(1)
</code></pre>
<blockquote>
<p>ä¸è¦è¢«ä¸Šé¢è¿™ç§çœ‹ä¼¼å¤æ‚çš„å®šä¹‰æ‰€å›°æ‰°ã€‚</p>
<p>å®ƒåªä¸è¿‡ç”¨é€’å½’çš„æ–¹å¼å®šä¹‰äº†ä¸€ä»¶å¾ˆç®€å•çš„äº‹æƒ…ï¼š</p>
<pre><code class="language-haskell">  expn(m)(n) === (mult(m) * mult(m) * ... * mult(m))(succ(zero))
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                   "the composition of n mult(m)"
</code></pre>
</blockquote>
<blockquote>
<p><strong>å°å’Œå°šï¼š</strong></p>
<ul>
<li>æ€»æ˜¯nä¸ªç›¸åŒå‡½æ•°çš„ç»„åˆï¼›èƒ½ä¸èƒ½æœ‰äº›æ–°ä¸œè¥¿å‘¢ï¼Ÿ</li>
</ul>
<p><strong>å”åƒ§ï¼š</strong></p>
<ul>
<li>ä½•å¿…è®©è‡ªå·±è¿™ä¹ˆç´¯ï¼›è¿™æ ·åˆ’æ°´ä¸æŒºå¥½å˜›ï¼
<br> <br></li>
</ul>
</blockquote>
</li>
<li>
<p><strong>é˜¶ä¹˜è¿ç®—</strong></p>
<pre><code class="language-haskell">def fact : â„• -&gt; â„• = [m] match m {
    zero    =&gt; succ(zero),
    succ(n) =&gt; mult(succ(n))(fact(n)),
}
</code></pre>
<blockquote>
<p>ä¸è¦è¢«ä¸Šé¢è¿™ç§çœ‹ä¼¼å¤æ‚çš„å®šä¹‰æ‰€å›°æ‰°</p>
<p>å®ƒåªä¸è¿‡ç”¨é€’å½’çš„æ–¹å¼å®šä¹‰äº†ä¸€ä»¶å¾ˆç®€å•çš„äº‹æƒ…ï¼š</p>
<pre><code class="language-haskell">fact(m) === (mult(m) * mult(m - 1) * ... * mult(1))(1)
            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                 "the composition of n mult(_)"
</code></pre>
</blockquote>
<blockquote>
<p><strong>å”åƒ§ï¼š</strong> çœ‹ï¼Œæ˜¯ä¸æ˜¯æœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹æ–°ä¸œè¥¿äº† ğŸ˜…</p>
</blockquote>
</li>
<li>
<p><strong>æ–æ³¢é‚£å¥‘å‡½æ•°</strong></p>
<pre><code class="language-haskell">def fib : â„• -&gt; â„• = [m] match m {
    zero          =&gt; zero,
    succ(zero)    =&gt; succ(zero),
    succ(succ(n)) =&gt; plus(fib(n))(fib(succ n)),
}
</code></pre>
<p>æ–æ³¢é‚£å¥‘å‡½æ•°è¿ç®—ç¤ºä¾‹ï¼š</p>
<pre><code class="language-haskell">    fib(5)
=== plus(fib(3))(fib(4))
=== plus(plus(fib(1))(fib(2)))(plus(fib(2))(fib(3)))
=== plus(plus(1)(plus(fib(0))(fib(1))))(plus(plus(fib(0))(fib(1)))(plus(fib(1))(fib(2))))
=== plus(plus(1)(plus(0)(1)))(plus(plus(0)(1))(plus(1)(plus(fib(0))(fib(1)))))
=== plus(plus(1)(plus(0)(1)))(plus(plus(0)(1))(plus(1)(plus(0)(1))))
</code></pre>
<blockquote>
<p><strong>å°å’Œå°šï¼š</strong> è¿™ä¸‹å¥½äº†ï¼Œæ²¡æœ‰è§„å¾‹äº†ã€‚çœ‹ä½ æ€ä¹ˆåœ†è¿‡æ¥ ğŸ˜œ</p>
</blockquote>
</li>
</ul>
<h3 id="06-è‡ªç„¶æ•°ä¸Šçš„-fold-å‡½æ•°"><a class="header" href="#06-è‡ªç„¶æ•°ä¸Šçš„-fold-å‡½æ•°">06 è‡ªç„¶æ•°ä¸Šçš„ fold å‡½æ•°</a></h3>
<ul>
<li>
<p><code>plus</code> <code>mult</code> <code>expn</code> è¿™ä¸‰ä¸ªå‡½æ•°ä¹‹é—´å­˜åœ¨å…±æ€§</p>
</li>
<li>
<p>è¿™ç§å…±æ€§å¯ä»¥è¢«å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­</p>
<pre><code class="language-haskell">[T : Type]
def fold
: (T -&gt; T) -&gt; (T -&gt; (â„• -&gt; T))
= [h : T -&gt; T] [c : T] [m : â„•] match m {
    zero   =&gt; c,
    succ n =&gt; h(fold(h)(c)(n))
  }
  ------ å¼•å…¥ä¸€ç‚¹è¯­æ³•ç³– ------
= [h : T -&gt; T, c : T, m : â„•] match m {
    zero   =&gt; c,
    succ n =&gt; h(fold(h)(c)(n))
  }
</code></pre>
</li>
<li>
<p>ç»™å®š <code>h : T -&gt; T</code>, <code>c : T</code>ï¼Œä»¤ <code>f === fold(h)(c)</code>ï¼Œåˆ™å¯çŸ¥ï¼š</p>
<ul>
<li>
<p><code>f(zero) === c</code></p>
</li>
<li>
<p><code>f(succ n) === h(f(n))</code></p>
</li>
</ul>
</li>
<li>
<p>å¦‚æœä¸ç†è§£è¿™ä¸ªå®šä¹‰çš„å«ä¹‰ï¼Œè¯·çœ‹å¦‚ä¸‹è§£é‡Šï¼š</p>
<blockquote>
<p>ç»™å®šä¸€ä¸ªè‡ªç„¶æ•° <code>n</code>ï¼Œå¯çŸ¥ï¼š</p>
<pre><code class="language-haskell">   n === (succ * succ * succ * ... * succ)(zero)
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            "the composition of n succ"
</code></pre>
</blockquote>
<blockquote>
<p>å·²çŸ¥ <code>f === fold(h)(c)</code>ï¼Œåˆ™å¯çŸ¥ï¼š</p>
<pre><code class="language-haskell">f(n) === ( h   *   h   *  h  *  ... *  h )(zero)
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            "the composition of n h"
</code></pre>
</blockquote>
<blockquote>
<p>ä¹Ÿå³ï¼š</p>
<ul>
<li>
<p><code>f(n)</code> æŠŠ <code>n</code> ä¸­çš„ <code>zero</code> æ›¿æ¢ä¸º <code>c</code>ï¼ŒæŠŠæ¯ä¸€ä¸ª <code>succ</code> æ›¿æ¢ä¸º <code>h</code></p>
</li>
<li>
<p><code>n</code> å’Œ <code>f(n)</code> æ˜¯åŒæ„çš„ï¼Œå³ï¼šä¸¤è€…å…·æœ‰ç›¸åŒçš„ç»“æ„</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>ä½¿ç”¨ <code>fold</code> å‡½æ•°ï¼Œå¯ä»¥å¯¹ <code>plus</code> <code>mult</code> <code>expn</code> è¿™ä¸‰ä¸ªå‡½æ•°è¿›è¡Œæ›´æ·±åˆ»çš„å®šä¹‰</p>
<pre><code class="language-haskell">def plus : â„• -&gt; (â„• -&gt; â„•) = [m] fold(succ)(m)

def mult : â„• -&gt; (â„• -&gt; â„•) = [m] fold(plus(m))(zero)

def expn : â„• -&gt; (â„• -&gt; â„•) = [m] fold(mult(m))(succ(zero))
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-haskell">               ----the composition of n succ -----
  n        === (succ    * succ    * ... * succ   )(zero)
  |              |         |         |     |
plus(m)(n) === (succ    * succ    * ... * succ   )(m)
  |              |         |         |     |
mult(m)(n) === (plus(m) * plus(m) * ... * plus(m))(zero)
  |              |         |         |     |
expn(m)(n) === (mult(m) * mult(m) * ... * mult(m))(succ(zero))

</code></pre>
</li>
<li>
<p>ä½¿ç”¨<code>fold</code>å‡½æ•°ï¼Œä¹Ÿå¯ä»¥å¯¹ <code>fact</code> <code>fib</code> è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œæ›´æ·±åˆ»çš„å®šä¹‰</p>
<p>é¦–å…ˆå¼•å…¥ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p>
<pre><code class="language-haskell">[A B : Type]
def fst : A âœ— B -&gt; A = [(a, b)] a

[A B : Type]
def snd : A âœ— B -&gt; B = [(a, b)] b
</code></pre>
<p><code>fact</code>å‡½æ•°çš„å®šä¹‰ï¼š</p>
<pre><code class="language-haskell">def fact : â„• -&gt; â„• = {
    def f
    : â„• âœ— â„• -&gt; â„• âœ— â„•
    = [(m, n)] (m + 1, (m + 1) * n);

    ret snd * (fold(f)(0, 1));
}
</code></pre>
<pre><code class="language-haskell">                 ----the composition of n succ ----
  n     ===      ( succ  *  succ  *  ...  *  succ )(0)
  |                 |        |        |       |     |
fact(n) === snd( (  f    *   f    *  ...  *   f   )(0, 1) )
</code></pre>
<p><code>fib</code>å‡½æ•°çš„å®šä¹‰ï¼š</p>
<pre><code class="language-haskell">def fib : â„• -&gt; â„• = {
    def g
    : â„• âœ— â„• -&gt; â„• âœ— â„•
    = [(m, n)] (n, m + n);

    ret fst * (fold(g)(0, 1));
}
</code></pre>
<pre><code class="language-haskell">                 ----the composition of n succ ----
  n     ===      ( succ  *  succ  *  ...  *  succ )(0)
  |                 |        |        |       |     |
fib(n)  === fst( (  g    *   g    *  ...  *   g   )(0, 1) )
</code></pre>
</li>
</ul>
<h3 id="07-list-ç±»å‹"><a class="header" href="#07-list-ç±»å‹">07 List ç±»å‹</a></h3>
<ul>
<li>
<p>åœ¨ä¿¡æ¯å¤„ç†é—®é¢˜ä¸­ï¼Œç»å¸¸æ¶‰åŠä¸€ç»„æŒ‰ç…§æŸç§é¡ºåºæ’åˆ—çš„æ•°æ®ï¼›</p>
<p>æˆ‘ä»¬å°†è¿™ç±»æ•°æ®ç”¨ List ç±»å‹è¿›è¡Œè¡¨ç¤ºã€‚</p>
<ul>
<li>
<p>ä¾‹å¦‚ï¼šå¯¹äºæ’åºé—®é¢˜</p>
<ul>
<li>
<p>å¾…æ’åºçš„æ•°æ®é€šå¸¸é‡‡ç”¨ List çš„æ–¹å¼è¿›è¡Œè¾“å…¥</p>
</li>
<li>
<p>æ’åºçš„ç»“æœè‡ªç„¶ä¹Ÿä»¥ List çš„æ–¹å¼è¿”å›</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>List ç±»å‹çš„å®šä¹‰</p>
<pre><code class="language-haskell">def List : Type -&gt; Type = [A] {
    ctor nil  : Self,
    ctor (+&gt;) : A -&gt; Self -&gt; Self,
}
</code></pre>
</li>
<li>
<p>List ç±»å‹çš„ç¤ºä¾‹</p>
<ul>
<li>
<p><code>List(â„•)</code>ï¼šè‡ªç„¶æ•°åºåˆ—ç±»å‹</p>
</li>
<li>
<p><code>nil</code>ï¼šä¸€ä¸ªä¸åŒ…å«ä»»ä½•å…ƒç´ çš„ç©ºåºåˆ—</p>
</li>
<li>
<p><code>1 +&gt; nil</code>ï¼šä»…åŒ…å« 1 ä¸ªå…ƒç´  <code>1</code> çš„è‡ªç„¶æ•°åºåˆ—</p>
</li>
<li>
<p><code>1 +&gt; (2 +&gt; (3 +&gt; (4 +&gt; nil)))</code>ï¼šåŒ…å« 4 ä¸ªå…ƒç´  <code>1</code> <code>2</code> <code>3</code> <code>4</code> çš„è‡ªç„¶æ•°åºåˆ—</p>
</li>
</ul>
</li>
<li>
<p>List ç±»å‹ç›¸å…³çš„å‡½æ•°</p>
<p>æ·»åŠ å…ƒç´ å‡½æ•°ï¼š</p>
<pre><code class="language-haskell">[T : Type]
def cons
: T -&gt; (List(T) -&gt; List(T))
= [x, xs] x +&gt; xs

-- è¿™ä¸ªå‡½æ•°å°±æ˜¯æŠŠè¿ç®—ç¬¦ +&gt; è¿›è¡Œäº†å‡½æ•°åŒ–
</code></pre>
<p>é•¿åº¦å‡½æ•°ï¼š</p>
<pre><code class="language-haskell">[T : Type]
def len
: List(T) -&gt; â„•
= [xs] match xs {
    nil     =&gt; 0,
    a +&gt; yx =&gt; 1 + len(yx)
}
</code></pre>
<p>é€†åºå‡½æ•°ï¼š</p>
<pre><code class="language-haskell">[T : Type]
def rev
: List(T) -&gt; List(T)
= {
    def rev-memo
    : List(T) -&gt; (List(T) -&gt; List(T))
    = [xs, ys] match ys {
        nil     =&gt; xs,
        m +&gt; ms =&gt; rev-memo(m +&gt; xs)(ms),
    };

    ret rev-memo(nil);
}
</code></pre>
<p>åºåˆ—æ‹¼æ¥å‡½æ•°ï¼š</p>
<pre><code class="language-haskell">[T : Type]
def concat
: List(T) -&gt; (List(T) -&gt; List(T))
= [xs, ys] match xs {
    nil     =&gt; ys,
    m +&gt; ms =&gt; m +&gt; (concat(ms)(ys)),
}
</code></pre>
<p>è¿‡æ»¤å‡½æ•°ï¼š</p>
<pre><code class="language-haskell">[T : Type]
def filter
: (T -&gt; ğ”¹) -&gt; (List(T) -&gt; List(T))
= [f, xs] match xs {
    nil     =&gt; nil,
    m +&gt; ms =&gt; match f(m) {
        true =&gt; m +&gt; filter(f)(ms),
        flse =&gt;      filter(f)(ms),
    }
}
</code></pre>
</li>
</ul>
<h3 id="08-list-ä¸Šçš„-fold-å‡½æ•°"><a class="header" href="#08-list-ä¸Šçš„-fold-å‡½æ•°">08 List ä¸Šçš„ fold å‡½æ•°</a></h3>
<ul>
<li>
<p>å¦‚æœæˆ‘çš„ç†è§£æ²¡æœ‰é”™è¯¯ï¼Œåœ¨ä»»ä½•ç±»å‹ä¸Šéƒ½å­˜åœ¨ fold å‡½æ•°</p>
<div class="warning">
<pre><code>è¿™ä¸ªè§‚ç‚¹å¾…ç¡®è®¤ã€‚
æ•°å­¦ä¸Šçš„äº‹æƒ…ï¼Œåªè¦æ²¡æœ‰ç»™å‡ºè¯æ˜ï¼Œéƒ½ä¸èƒ½éšæ„ç›¸ä¿¡ã€‚
</code></pre>
</div>
</li>
<li>
<p>æ— è®ºå¦‚ä½•ï¼Œ<code>List</code> ç±»å‹ä¸Šå­˜åœ¨ fold å‡½æ•°ï¼Œè€Œä¸”å­˜åœ¨ä¸¤ä¸ªã€‚</p>
<p>æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«å‘½åä¸º <code>foldl</code> å’Œ <code>foldr</code>ã€‚</p>
<ul>
<li>å…¶ä¸­çš„åç¼€ <code>l</code> å’Œ <code>r</code> åˆ†åˆ«è¡¨ç¤º <code>left</code> å’Œ <code>right</code></li>
</ul>
</li>
<li>
<p><code>foldr</code> å‡½æ•°</p>
<pre><code class="language-haskell">[A B : Type]
def foldr
: (A -&gt; (B -&gt; B)) -&gt; (B -&gt; (List(A) -&gt; B))
= [h : A -&gt; (B -&gt; B), b : B, xs : List(A)] match xs {
    nil     =&gt; b,
    a +&gt; ys =&gt; h(a)(foldr(h)(b)(ys))
}
</code></pre>
<blockquote>
<p>å¦‚æœä¸ç†è§£è¿™ä¸ªå®šä¹‰ï¼Œè¯·çœ‹å¦‚ä¸‹è§£é‡Šï¼š</p>
<ul>
<li>
<p>ç»™å®š <code>xs : List(A)</code>ï¼Œä¸å¤±ä¸€èˆ¬æ€§ï¼Œä»¤ï¼š</p>
<pre><code class="language-haskell">xs    === xn  +&gt;  xn-1  +&gt;  ...  +&gt;  x1  +&gt;  nil
</code></pre>
<p>åˆ™å¯çŸ¥ï¼š</p>
<pre><code class="language-haskell">xs    === ( cons(xn) * cons(xn-1) * ... * cons(x1) )(nil)
</code></pre>
</li>
<li>
<p>å·²çŸ¥ <code>f === foldr(h)(b)</code>ï¼Œåˆ™å¯çŸ¥ï¼š</p>
<pre><code class="language-haskell">f(xs) === (    h(xn) *    h(xn-1) * ... *    h(x1) )(b)
</code></pre>
</li>
<li>
<p>ä¹Ÿå³ï¼š</p>
<ul>
<li>
<p><code>f(xs)</code>æŠŠ<code>xs</code>ä¸­çš„<code>nil</code>æ›¿æ¢ä¸º<code>b</code>ï¼ŒæŠŠ<code>xs</code>ä¸­çš„æ¯ä¸€ä¸ª<code>cons</code>æ›¿æ¢ä¸º<code>h</code></p>
</li>
<li>
<p><code>xs</code> å’Œ <code>f(xs)</code> æ˜¯åŒæ„çš„ï¼Œå³ï¼šä¸¤è€…å…·æœ‰ç›¸åŒçš„ç»“æ„</p>
</li>
</ul>
</li>
</ul>
</blockquote>
</li>
<li>
<p><code>foldl</code> å‡½æ•°</p>
<pre><code class="language-haskell">[A B : Type]
def foldl
: (B -&gt; (A -&gt; B)) -&gt; (B -&gt; (List(A) -&gt; B))
= [h : B -&gt; (A -&gt; B), b : B, xs : List(A)] match xs {
    nil     =&gt; b,
    a +&gt; ys =&gt; foldl(h)(h(b)(a))(ys),
}
</code></pre>
<blockquote>
<p>å¦‚æœä¸ç†è§£è¿™ä¸ªå®šä¹‰ï¼Œè¯·çœ‹å¦‚ä¸‹è§£é‡Šï¼š</p>
<ul>
<li>
<p>å¼•å…¥ä¸€ä¸ªå·¥å…·å‡½æ•°</p>
<pre><code class="language-haskell">[A B C : Type]
def flip
: (A -&gt; (B -&gt; C)) -&gt; (B -&gt; (A -&gt; C))
= [f, b, a] f a b
</code></pre>
</li>
<li>
<p>ç»™å®š <code>xs : List(A)</code>ï¼Œä¸å¤±ä¸€èˆ¬æ€§ï¼Œä»¤ï¼š</p>
<pre><code class="language-haskell">xs    === xn  +&gt;  xn-1  +&gt;  ...  +&gt;  x1  +&gt;  nil
</code></pre>
<p>åˆ™å¯çŸ¥ï¼š</p>
<pre><code class="language-haskell">xs    === ( cons(xn) * cons(xn-1) * ... * cons(x1) )(nil)
</code></pre>
</li>
<li>
<p>å·²çŸ¥ <code>f === foldr(h)(b)</code>ï¼Œä»¤ <code>h' = flip(h)</code>ï¼Œåˆ™å¯çŸ¥ï¼š</p>
<pre><code class="language-haskell">f(xs) === (   h'(x1) *   h'(x2)   * ... *   h'(xn) )(b)
</code></pre>
</li>
<li>
<p>ä¹Ÿå³ï¼š</p>
<ul>
<li>
<p><code>f(xs)</code>æŠŠ<code>xs</code>ä¸­çš„<code>nil</code>æ›¿æ¢ä¸º<code>b</code>ï¼ŒæŠŠ<code>xs</code>ä¸­çš„æ¯ä¸€ä¸ª<code>cons</code>æ›¿æ¢ä¸º<code>h'</code></p>
</li>
<li>
<p>åŒæ—¶ï¼Œè¿˜é¡ºå¸¦é€†åºäº†ä¸€ä¸‹</p>
</li>
</ul>
</li>
<li>
<p>ä½†å®é™…ä¸Šï¼Œ<strong>å¹¶ä¸å­˜åœ¨ä¸€ä¸ªæ˜¾å¼çš„é€†åºç¯èŠ‚</strong>ï¼›æ›´çœŸå®çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹</p>
<pre><code class="language-haskell">f(xs) === b â‰º xn â‰º xn-1 â‰º ... â‰º x1 â‰º nil
</code></pre>
<p>å…¶ä¸­ï¼šè¿ç®—ç¬¦ <code>â‰º</code> å…·æœ‰å·¦ç»“åˆæ€§ï¼Œä¸” <code>b â‰º a === h(b)(a)</code></p>
</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="09-ä½¿ç”¨foldå‡½æ•°é‡å®šä¹‰listç›¸å…³çš„å‡½æ•°"><a class="header" href="#09-ä½¿ç”¨foldå‡½æ•°é‡å®šä¹‰listç›¸å…³çš„å‡½æ•°">09 ä½¿ç”¨foldå‡½æ•°ï¼Œé‡å®šä¹‰Listç›¸å…³çš„å‡½æ•°</a></h3>
<ul>
<li>
<p><code>len</code> å‡½æ•°</p>
<pre><code class="language-haskell">[A : Type]
def len
: List(A) -&gt; â„•
= {
    def h
    : A -&gt; â„• -&gt; â„•
    = [_, n] n + 1;

    ret foldr(h)(0)
}
</code></pre>
<blockquote>
<pre><code class="language-haskell">    xs  === ( cons(xn) * cons(xn-1) * ... * cons(x1) )(nil)
len(xs) === (    h(xn) *    h(xn-1) * ... *    h(x1) )(0)
</code></pre>
</blockquote>
</li>
<li>
<p><code>rev</code> å‡½æ•°</p>
<pre><code class="language-haskell">[A : Type]
def rev
: List(A) -&gt; List(A)
= foldl(flip(cons))(nil)
</code></pre>
</li>
<li>
<p><code>concat</code> å‡½æ•°</p>
<pre><code class="language-haskell">[A : Type]
def concat
: List(A) -&gt; (List(A) -&gt; List(A))
= [xs, ys] foldr(cons)(ys)(xs)
</code></pre>
</li>
<li>
<p><code>filter</code> å‡½æ•°</p>
<pre><code class="language-haskell">[A : Type]
def filter
: (A -&gt; ğ”¹) -&gt; (List(A) -&gt; List(A))
= [f] {
    def h
    : (A -&gt; ğ”¹) -&gt; (A -&gt; (List(A) -&gt; List(A)))
    = [f, a, xs] match f(a) {
        true =&gt; a +&gt; xs,
        flse =&gt; xs,
    }

    ret foldr(h(f))(nil);
}
</code></pre>
<blockquote>
<pre><code class="language-haskell">          xs  === ( cons(xn) * cons(xn-1) * ... * cons(x1) )(nil)
filter(f)(xs) === ( h(f)(xn) * h(f)(xn-1) * ... * h(f)(x1) )(nil)
</code></pre>
</blockquote>
</li>
</ul>
<h3 id="10-ä¸€ç§æ’åºç®—æ³•"><a class="header" href="#10-ä¸€ç§æ’åºç®—æ³•">10 ä¸€ç§æ’åºç®—æ³•</a></h3>
<ul>
<li>
<p>å¿«é€Ÿæ’åºç®—æ³•</p>
<pre><code class="language-haskell">def qsort
: List(â„•) -&gt; List(â„•)
= [xs] match {
    nil     =&gt; nil,
    n +&gt; ns =&gt; {
       def left = qsort(filter([m] m &lt;  n)(ns));
       def rigt = qsort(filter([m] m &gt;= n)(ns));

       ret concat(left)(n +&gt; rigt);
    }
}
</code></pre>
<blockquote>
<p><strong>å°å’Œå°šï¼š</strong></p>
<ul>
<li>è¿™æ®µä»£ç çœ‹èµ·æ¥è¿˜ä¸é”™ ğŸ‘</li>
</ul>
<p><strong>å”åƒ§ï¼š</strong></p>
<ul>
<li>
<p>ä½ çš„å®¡ç¾èƒ½åŠ›çœ‹èµ·æ¥ä¹Ÿä¸é”™ ğŸ‘</p>
</li>
<li>
<p>å¯ä»¥è®©ä½ çœ‹ä¸€ä¸‹å»å¹´çš„å½¢å¼ï¼š</p>
<pre><code class="language-haskell">qsort : List(â„•) -&gt; List(â„•)
qsort(nil) = nil
qsort(n +&gt; ns) = concat(concat(qsort(filter(lt(n))(ns)))([n]))(qsort(filter(ge(n))(ns)))
where
    lt : â„• -&gt; (â„• -&gt; ğ”¹)
    lt(n)(m) = if m &lt; n then true else flse

    ge : â„• -&gt; (â„• -&gt; ğ”¹)
    ge(n)(m) = not(lt(n)(m))
</code></pre>
</li>
</ul>
<p><strong>å°å’Œå°šï¼š</strong></p>
<ul>
<li>å¦‚æœè¿™å°±æ˜¯ç”¨ FP ä¹¦å†™çš„ç®—æ³•ï¼Œæ­¤ç”Ÿç»ä¸å­¦ FPï¼</li>
</ul>
<p><strong>å”åƒ§ï¼š</strong></p>
<ul>
<li>å¥½å­©å­ï¼Œå¦‚æœç»™ä½ ä¸‰ç”Ÿä¸‰ä¸–çš„è´¢å¯Œï¼Œå­¦å¦ï¼Ÿ</li>
</ul>
<p><strong>å°å’Œå°šï¼š</strong></p>
<ul>
<li>ä½›å­¦å·¥ä½œè€…å¯æ˜¯ä¸èƒ½æ’’è°çš„å“¦ï¼ï¼ï¼
<br> <br></li>
</ul>
</blockquote>
</li>
<li>
<p><strong>å†…å®¹</strong> ä¸ <strong>å½¢å¼</strong></p>
<ul>
<li>
<p>è¿™æ˜¯ä¸€ä¸ªå…³äº â€œå†…å®¹â€ ä¸ â€œå½¢å¼â€ ä¸¤è€…ä¹‹é—´å…³ç³»çš„é—®é¢˜</p>
<ul>
<li>
<p>å†…å®¹ï¼šå¯¹è‡ªç„¶æ•°åºåˆ—è¿›è¡Œæ’åºçš„ä¸€ç§æ–¹æ³•</p>
</li>
<li>
<p>å½¢å¼ï¼šè¡¨ç°è¿™ç§æ’åºæ–¹æ³•çš„å½¢å¼</p>
</li>
</ul>
</li>
<li>
<p>è¿›ä¸€æ­¥è€Œè¨€ï¼Œå»å¹´çš„ç¨‹åºå­˜åœ¨çš„é—®é¢˜å¯ä»¥è¡¨è¿°ä¸ºï¼š</p>
<ul>
<li>â€œå½¢å¼â€ å°äº â€œå†…å®¹â€: å†…å®¹æ˜¯å¾ˆå¥½çš„ï¼Œä½†å½¢å¼å®åœ¨æ˜¯å¤ªç³Ÿç³•äº†</li>
</ul>
</li>
<li>
<p>å¦‚æœä½ èƒ½ä½“ä¼šåˆ°è¿™ä¸€ç‚¹ï¼Œä½ ä¼šå‘ç°ï¼šè¿™ä¸ªé—®é¢˜çš„ä¸¥é‡ç¨‹åº¦å¹¶ä¸åƒè¡¨é¢ä¸Šçœ‹èµ·æ¥çš„é‚£æ ·</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºï¼Œæœ¬è´¨ï¼ˆå†…å®¹ï¼‰æ¯•ç«Ÿè¿˜æ˜¯å¾ˆå¥½çš„</p>
</li>
</ul>
</li>
<li>
<p><strong>é‡èµ°é•¿å¾è·¯</strong></p>
<ul>
<li>
<p>åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œæˆ‘ä»¬æ­£åœ¨â€œé‡èµ°é•¿å¾è·¯â€</p>
</li>
<li>
<p>åœ¨å¾ˆå¤šå¹´ä»¥å‰ï¼Œç§‘ç ”å·¥ä½œè€…ä»¬å°±å·²ç»æ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜</p>
<ul>
<li>å³ï¼šå‡½æ•°å¼æ€ç»´çš„ â€œå½¢å¼â€ å°äº â€œå†…å®¹â€</li>
</ul>
</li>
<li>
<p>åœ¨è¿™ä¸ªé—®é¢˜çš„é©±ä½¿ä¸‹ï¼Œä»–/å¥¹ä»¬è®¾è®¡äº†å„ç§å„æ ·çš„å‡½æ•°å¼ç¨‹åºè®¾è®¡è¯­è¨€</p>
</li>
<li>
<p>æˆ‘ä»¬å³å°†ä»‹ç»çš„Haskellè¯­è¨€ï¼Œå°±æ˜¯è¿™äº›å‡½æ•°å¼ç¨‹åºè®¾è®¡è¯­è¨€çš„é›†å¤§æˆè€…</p>
</li>
<li>
<p>ä¸è¿‡ï¼Œç›®å‰çœ‹æ¥ï¼ŒHaskell è¯­è¨€æ­£åœ¨è€å»ï¼š<strong>ä¸€é²¸è½ï¼Œä¸‡ç‰©ç”Ÿï¼</strong></p>
<ul>
<li>ä¾‹å¦‚ï¼Œæœ¬ç« ä¸­ç¨‹åºçš„è¯­æ³•ï¼Œå°±æ˜¯åœ¨ Haskell è¯­è¨€çš„åŸºç¡€ä¸Šæ”¹è‰¯å½¢æˆçš„</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="11-å‰§é€é‡‡ç”¨-haskell-è¯­è¨€ç¼–å†™çš„-qsort-ç®—æ³•"><a class="header" href="#11-å‰§é€é‡‡ç”¨-haskell-è¯­è¨€ç¼–å†™çš„-qsort-ç®—æ³•">11 å‰§é€ï¼šé‡‡ç”¨ Haskell è¯­è¨€ç¼–å†™çš„ qsort ç®—æ³•</a></h3>
<pre><code class="language-haskell">qsort :: Ord a =&gt; [a] -&gt; [a]
qsort []     	= []
qsort (p:xs)	= qsort lt ++ [p] ++ qsort ge
  where
    lt = filter (&lt;  p) xs
    ge = filter (&gt;= p) xs
</code></pre>
<h3 id="æœ¬ç« ä½œä¸š"><a class="header" href="#æœ¬ç« ä½œä¸š">æœ¬ç« ä½œä¸š</a></h3>
<blockquote>
<div class="warning">
<p>æœ¬ç« æ²¡æœ‰ä½œä¸šã€‚</p>
<p>ä½†æ˜¯ï¼Œä½ éœ€è¦æƒ³æ¸…æ¥šï¼šè¿™é—¨è¯¾æ˜¯å¦é€‚åˆä½ ã€‚</p>
</div>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="01_intro.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="01_intro.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
